{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block title %}Profile{% endblock %}

<!-- DO I ITERATE OVER THE OBJECT TO GET ALL ATTS? -->
{% block content %}

{% if user.is_authenticated %}
    <div class="jumbotron-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="user-profile-block">
                    <div class="fb-profile-block-thumb cover-container"></div>
                    <div class="profile-img">
                        <a href="">
                            <img src="{{ user_profile.profile_picture.url }}" alt="">
                        </a>
                    </div>
                    <div class="profile-name">
                        <h2>{{ twitter_screen }}</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="container-fluid mt-5">
            
            <div class="row">
                <div class="col-lg-3 col-sm-12 align-items-start">
                    <!-- IF NULL LOAD SCREEN NAME -->
                    <!-- SEARCH FUNCTION ON SOCIAL FOLLOWERS -->
                    <p><b><i class="fas fa-users"></i>  Social Followers</b>: {{ user_profile.follower_amount }}</p>
                    <p><b><i class="fas fa-user-plus"></i>  Friends</b>: {{ user_profile.friends }}</p>
                    <p><b>Location</b>: {{ user_profile.location }}</p>
                    <!-- <p><b>City</b>: {{ user_profile.city }}</p> -->
                </div>
                <div class="col-lg-4 col-sm-12 align-items-start">
                    <p><b>Name</b>: {{ user_profile.first_name }}</p>
                    <p><i class="far fa-envelope"></i> {{ user.email }}</p>
                    <p><i class="fab fa-twitter-square"></i>  <a href="{{ user_profile.social_media }}"> {{ user_profile.social_media }}</a></p>
                    <p><i class="fas fa-photo-video"></i>  <a href="{{ user_profile.portfolio.links }}"> {{ user_profile.portfolio_links }}</a></p>
                </div>
                <!-- <div class="col-lg-3 col-sm-12">
                    <div class="text-center">
                        <p><b>Experience</b></p>
                    </div>
                    <p>{{ user_profile.experience }}</p>
                </div> -->
                <div class="col-lg-5 col-sm-12">
                    <div class="text-center">
                        <p><b>Bio</b></p>
                    </div>
                    <p>{{ user_profile.bio }}</p>
                </div>
            </div>
            <br>
        </div>
        <hr>
    <!-- WORK ON AUTH -->
    <div class="text-center">
        {% if request.user.id == auth.id %}
            
            <!-- CREATE BUTTON TO PUSH INSTEAD -->
            <!-- DONT FORGET ENCTYPE -->
            <button class="postbtn btn btn-outline-dark">Upload Photo</button>    
            <a method="GET" href="{% url 'update_profile' %}">
                <button class="btn btn-outline-dark">Update Profile</button>
            </a>
            <a href="{% url 'photo_library' %}">
                <button class="btn btn-outline-dark">Photo Library</button>
            </a>
            <hr>
        {% else %}
            <a href="{% url 'create-msg' create_msg.id %}">
                <button class="btn btn-outline-dark">Create Message</button>
            </a>
            <a href="{% url 'photo_library' %}">
                <button class="btn btn-outline-dark">Photo Library</button>
            </a>
            <hr>
        {% endif %}
    </div>

    <br><br>
    <div class="text-center">
        <!-- Upload photos -->
        <form class="postform" action="" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <input class="file-input mb-2" type="file" name="image_file"><br>
            <button class="btn btn-outline-dark" type="submit" value="Submit">Submit</button>
        </form>
        <br>
        <div class="row">
            {% for image in images %}
                <div class="col-lg-4 col-md-6 col-sm-12 text-center">
                    <div id="crop_photo" class="test" id="test">
                        <!-- SWITCH LINK TO PROFILE PAGE AND ALSO CARASEL -->
                        <a href="{{ image.file.url }}"><img id="profile_photos" class="user-img" src="{{ image.file.url }}" alt=""></a>      
                        <a href="{% url 'delete' image.id %}" class="remImage"><i class="far fa-times-circle"></i></a>
                    </div>
                    <hr id="photo_divider">
                </div>
            {% endfor %}
        </div>
        <br><br>
    </div>
</div>

{% endif %}
    
{% endblock %}

<!-- 
<form action="/action_page.php">
    Select images: <input type="file" name="img" multiple>
    <input type="submit">
  </form> -->
<!-- 
  <div class="test" id="test">
	<img width="450" height="300" src="http://cdn.wallpapersafari.com/51/38/02ukc1.jpg">	
	
	<a class="remImage" href="#" id="delete">
		<img src="https://image.flaticon.com/icons/svg/261/261935.svg" style="width:40px;height:40px;">
	</a>   
</div> -->